@using HOW.Models
@section PostCss {
<link href="~/CSS/post.css" rel="Stylesheet" type="text/css" />
}
@{
    List <Answer> answers = new AnswerRepository().GetAnswers(@Model.AuthorEmail, @Model.Title);
}
<script>
    $(document).ready(function () {
    $("#postbtn").click(function () {
        const answer1 = $("#answertxt").val();
        $.post("/Post/Answer", {answer: answer1}, function() {
        });
    });
});
</script>
<div>
    <div class="tab-pane fade active show" id="profile-post">
        <!-- begin timeline -->
        <ul class="timeline">
            <li>
                <!-- begin timeline-time -->
                <div class="timeline-time">
                    <span class="date">today</span>
                    <span class="time">04:20</span>
                </div>

                <!-- end timeline-time -->
                <!-- begin timeline-icon -->
                <div class="timeline-icon">
                    <a href="javascript:;">&nbsp;</a>
                </div>
                <!-- end timeline-icon -->
                <!-- begin timeline-body -->
                <div class="timeline-body">
                    <div class="timeline-header">
                        <span class="userimage"><img src="https://bootdey.com/img/Content/avatar/avatar3.png"
                                alt=""></span>
                        <span class="username"><a asp-controller="Profile" asp-action="Timeline">@Model.AuthorEmail</a>
                            <small></small></span>
                         <span class="pull-right ml-3"><a asp-controller="Post" asp-action="Edit"><i class="fa-solid fa-pen-to-square"></i></a></span>
                        <span class="pull-right text-muted">18 Views</span>
                    </div>
                    <div class="timeline-content">
                        <h4>@Model.Title</h4>
                        <p>
                           @Model.Description
                        </p>
                    </div>
                    <div class="timeline-likes">
                        <span class="stats-text">2 Answers</span>
                    </div>
                        @{
                        foreach(var q in answers)
                        {
                            <partial name = "AnswerPartialView" model = "@q"/>
                        }
                    }
                    <div class="timeline-comment-box">
                        <div class="user"><img src="https://bootdey.com/img/Content/avatar/avatar3.png"></div>
                        <div class="input">
                            <form method= "post">
                                <div class="input-group">
                                    <input type="text" id = "answertxt" class="form-control rounded-corner"
                                        placeholder="Write your answer">
                                    <span class="input-group-btn p-l-10">
                                        <button id = "postbtn" class="btn btn-primary f-s-12 rounded-corner"
                                            type="button">Answer</button>
                                    </span>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- end timeline-body -->
            </li>
        </ul>
        <!-- end timeline -->
    </div>
</div>